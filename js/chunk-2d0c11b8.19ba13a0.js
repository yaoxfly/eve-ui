(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c11b8"],{4545:function(s,t,a){"use strict";a.r(t);var r=function(){var s=this,t=s._self._c;return t("div",[t("div",{staticClass:"markdown-body"},[t("Md")],1)])},e=[],n=function(){var s=this;s._self._c;return s._m(0)},l=[function(){var s=this,t=s._self._c;return t("section",[t("html",[t("head"),t("body",[t("h1",[s._v("Request 发起请求")]),t("p",[s._v("基于 "),t("code",{pre:!0},[s._v("axios/flyio")]),s._v(" 封装的一个请求库,支持 "),t("code",{pre:!0},[s._v("web")]),s._v("、"),t("code",{pre:!0},[s._v("app")]),s._v("、小程序(使用 "),t("code",{pre:!0},[s._v("fiyio")]),s._v(" 做请求)等 ; 支持"),t("code",{pre:!0},[s._v("restFul")]),s._v("接口可发送,"),t("code",{pre:!0},[s._v("get")]),s._v(" 、"),t("code",{pre:!0},[s._v("post")]),s._v("、"),t("code",{pre:!0},[s._v("patch")]),s._v("、"),t("code",{pre:!0},[s._v("put")]),s._v("、"),t("code",{pre:!0},[s._v("delete")]),s._v(" 等请求; 支持 "),t("code",{pre:!0},[s._v("axios")]),s._v(" 和 "),t("code",{pre:!0},[s._v("fly.js")]),s._v(" 库的切换可进行拦截处理,自动弹出 "),t("code",{pre:!0},[s._v("http")]),s._v(" 请求错误、请求异常信息,未登录拦截等功能,具体实现通过配置参数、方法等实现。")]),t("h3",[s._v("API")]),t("p",[s._v("requests 方法可传各种类型请求，可添加"),t("code",{pre:!0},[s._v("headers")]),s._v("参数")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("  "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("requests")]),s._v("(url, param, type, config)\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v("=>")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(res, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求状态200,即接口请求成功时执行'")]),s._v(")\n    })   \n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("error")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(error, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求状态非200,500,401等,即接口请求失败时执行'")]),s._v(")\n    })\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("finally")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'接口请求无论成功还是失败都会执行'")]),s._v(")\n    })\n}\n")])]),t("p",[s._v("执行 get 请求")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("  "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("get")]),s._v("(url, param, config)\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v("=>")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(res)\n    })\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("error")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(error, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求返回的状态非200,是500,401等状态的，即接口请求失败时执行'")]),s._v(")\n    })\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("finally")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'接口请求无论成功还是失败都会执行'")]),s._v(")\n    })\n    \n")])]),t("p",[s._v("执行 post 请求")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("  "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("post")]),s._v("(url, param, config)\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v("=>")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(res)\n   })\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("error")]),s._v(" =>")]),s._v(" {\n       "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(error, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求返回的状态非200,是500,401等状态的，即接口请求失败时执行'")]),s._v(")\n    })\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("finally")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'接口请求无论成功还是失败都会执行'")]),s._v(")\n    })\n")])]),t("p",[s._v("执行 put 请求")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("  "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("put")]),s._v("(url, param, config)\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v("=>")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(res)\n    })\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("error")]),s._v(" =>")]),s._v(" {\n       "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(error, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求返回的状态非200,是500,401等状态的，即接口请求失败时执行'")]),s._v(")\n    })\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("finally")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'接口请求无论成功还是失败都会执行'")]),s._v(")\n    })\n\n")])]),t("p",[s._v("执行 patch 请求")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("  "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("patch")]),s._v("(url, param, config)\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v("=>")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(res)\n    })\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("error")]),s._v(" =>")]),s._v(" {\n       "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(error, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求返回的状态非200,是500,401等状态的，即接口请求失败时执行'")]),s._v(")\n    })\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("finally")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'接口请求无论成功还是失败都会执行'")]),s._v(")\n    })\n")])]),t("p",[s._v("执行 delete 请求")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("  "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("delete")]),s._v("(url, param, config)\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v("=>")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(res)\n    })\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("error")]),s._v(" =>")]),s._v(" {\n       "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(error, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求返回的状态非200,是500,401等状态的，即接口请求失败时执行'")]),s._v(")\n    })\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("finally")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'接口请求无论成功还是失败都会执行'")]),s._v(")\n    })\n")])]),t("h3",[s._v("原生API")]),t("p",[s._v("请求库内部有暴露"),t("code",{pre:!0},[s._v("axios/fly")]),s._v("的对象。")]),t("p",[s._v("请求库暴露出的原生对象，比原来的库，增加了自动弹出 http 请求错误、请求异常信息、未登录拦截、自动全局loading等功能。")]),t("p",[s._v("如果在"),t("code",{pre:!0},[s._v("config.js")]),s._v("文件中引入的是"),t("code",{pre:!0},[s._v("axios")]),s._v("。")]),t("p",[t("code",{pre:!0},[s._v("axios")]),s._v("原生对象获取：")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'@/request/config'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//根据你创建的名字和放置的位置引入，以下配置说明,有更详细的介绍。")]),s._v("\ncosnt axios =  "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("request")]),s._v("\n")])]),t("p",[s._v("执行 "),t("code",{pre:!0},[s._v("get")]),s._v(" 请求")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 为给定ID的user创建请求")]),s._v("\naxios."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("get")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/user?ID=12345'")]),s._v(")\n  ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("response")]),s._v("=>")]),s._v("{\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(response);\n    })\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n   ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("error")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(error, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求状态非200,500,401等,即接口请求失败时执行'")]),s._v(")\n    })\n     "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//可省略")]),s._v("\n    ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("finally")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'接口请求无论成功还是失败都会执行'")]),s._v(")\n    })\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 上面的请求也可以这样做")]),s._v("\n axios."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("get")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/user'")]),s._v(", {\n       "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("params")]),s._v(": {\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("ID")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("12345")]),s._v("\n        }\n      })\n  ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("response")]),s._v("=>")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(response);\n    })\n  ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("error")]),s._v("=>")]),s._v(" {\n        "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(error);\n    })\n")])]),t("p",[s._v("执行 post 请求")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("axios."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("post")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/user'")]),s._v(", {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("firstName")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Fred'")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lastName")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Flintstone'")]),s._v("\n  })\n  ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("response")]),s._v("=>")]),s._v(" {\n    "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(response);\n  })\n  ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("error")]),s._v("=>")]),s._v(" {\n    "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(error);\n  })\n")])]),t("p",[s._v("也可以通过向 "),t("code",{pre:!0},[s._v("axios")]),s._v(" 传递相关配置来创建请求")]),t("p",[t("code",{pre:!0},[s._v("axios(config)")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 发送 post 请求")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("axios")]),s._v("({\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("method")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'post'")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("url")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/user/12345'")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("data")]),s._v(": {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("firstName")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Fred'")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lastName")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Flintstone'")]),s._v("\n  }\n})."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("response")]),s._v("=>")]),s._v(" {\n "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(response)\n})\n")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 获取远端图片")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("axios")]),s._v("({\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("method")]),s._v(":"),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'get'")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("url")]),s._v(":"),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'http://bit.ly/2mTM3nY'")]),s._v(",\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("responseType")]),s._v(":"),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'stream'")]),s._v("\n})."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("response")]),s._v(" =>")]),s._v(" {\n  response."),t("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("data")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("pipe")]),s._v("(fs."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("createWriteStream")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'ada_lovelace.jpg'")]),s._v("))\n});\n")])]),t("blockquote",[t("p",[s._v("以上请求的方法中,都带有"),t("code",{pre:!0},[s._v("catch")]),s._v("和"),t("code",{pre:!0},[s._v("finally")]),s._v("方法,更多的内容参考: "),t("a",{attrs:{href:"http://www.axios-js.com/"}},[s._v("axios官网")]),s._v("; 如果用的是"),t("code",{pre:!0},[s._v("flyio")]),s._v("请求,可以参考 "),t("a",{attrs:{href:"https://www.npmjs.com/package/flyio"}},[s._v("flyio官网")])])]),t("h3",[s._v("配置说明")]),t("p",[s._v("在"),t("code",{pre:!0},[s._v("src")]),s._v("(源代码)文件夹新建"),t("code",{pre:!0},[s._v("request")]),s._v("文件夹，放入请求库工具类(当前工具类默认已经集成在脚手架工程里，包括"),t("code",{pre:!0},[s._v("src")]),s._v("文件夹和"),t("code",{pre:!0},[s._v("index.js")]),s._v("文件)，在"),t("code",{pre:!0},[s._v("request")]),s._v("文件夹里建立"),t("code",{pre:!0},[s._v("config.js")]),s._v("文件(与"),t("code",{pre:!0},[s._v("index.js")]),s._v("文件同级),并在"),t("code",{pre:!0},[s._v("config.js")]),s._v("中引入请求库,以下是具体的配置。")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Vue")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'vue'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" axios "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'axios'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" qs "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'qs'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'./index'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//引入请求库")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" { "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Loading")]),s._v(" } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'element-ui'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// import cache from '@/utils/cache.js' //缓存")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" router "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'@/router/index.js'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" $this = "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Vue")]),s._v("()\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" loading = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Vue")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("use")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v(")\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("({\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("/* 请求配置 */")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("requestConfig")]),s._v(": {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("request")]),s._v(": axios, "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 请求名 fly/axios")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'axios'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 请求类型")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("qs")]),s._v(": qs,\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("headers")]),s._v(": {\n      "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Content-Type'")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'application/json;charset=utf-8'")]),s._v("\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("timeout")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30000")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("baseURL")]),s._v(": process."),t("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("env")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("VUE_APP_SERVER")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//后台api的域名、ip等")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("withCredentials")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 请求拦截前执行 ,config是axios/fly")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("interceptionBefore")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("config")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//添加token")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// const token = cache.getCache('token')")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// if (token) {")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//   config.headers.Authorization = 'bearer' + ' ' + token")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// }")]),s._v("\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 请求拦截后执行,即接口请求结束时执行")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("interceptionAfter")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("response")]),s._v(" =>")]),s._v(" { },\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 是否JSONParse返回的数据--部分返回的数据不需要jsonParse")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("jsonParse")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("response")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 可自由添加不需要JSONParse的数据的逻辑方法,true就是需要false就是不需要的")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v("\n    }\n  },\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("/* loading配置 */")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("loading")]),s._v(": {\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 以下消息提示要200秒的延时,否则消息框会被提前关闭。")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("isLoading")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("false")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 是否开启全局动画--默认关闭全局动画")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("limitTime")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 接口请求在xxxms内完成则不展示loading 0无限制")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// loading显示")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("loadingShow")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("() =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("setTimeout")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("() =>")]),s._v(" {\n        loading = "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Loading")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("service")]),s._v("({\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("lock")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("true")]),s._v(",\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("text")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("''")]),s._v(",\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("background")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'rgba(255, 255, 255, 0.3)'")]),s._v("\n        })\n      }, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(")\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// loading隐藏")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("loadingHide")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("() =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("setTimeout")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("() =>")]),s._v(" {\n        loading && loading."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("close")]),s._v("()\n      }, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(")\n    }\n  },\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("/* 请求成功、异常的配置 */")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("resError")]),s._v(": {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("success")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'success'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 与后台规定的是否成功键值名")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("key")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'code'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 与后台规定的状态码的键值名")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("msg")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'msg'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 与后台规定的消息键值名 key值必须是msg,右边可改。")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("value")]),s._v(": -"),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 与后台规定的表示登录失败的code值,值相等时触发下面的notLogin方法")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 接口异常(接口500,403等报错时执行）")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("tipShow")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("err, response")]),s._v(") =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("setTimeout")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("() =>")]),s._v(" {\n        $this.$Message({\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": err,\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'error'")]),s._v("\n        })\n      }, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(")\n\n      "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//后端使用http状态码返回时401时，登录失败的处理方式")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (response."),t("span",{pre:!0,attrs:{class:"hljs-property"}},[s._v("status")]),s._v(" === "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("401")]),s._v(") {\n        router."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("push")]),s._v("({\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("path")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/login'")]),s._v("\n        })\n      }\n    },\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 登录失败时执行--与后台规定的表示登录失败的code值相等时触发的方法")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("notLogin")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("err")]),s._v(" =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("setTimeout")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("() =>")]),s._v(" {\n        $this.$Message({\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": err,\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'error'")]),s._v("\n        })\n      }, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(")\n    },\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 请求状态码200, 但业务上不成功时执行,即code!==0")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("notSuccessful")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("code, err")]),s._v(") =>")]),s._v(" {\n      "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("setTimeout")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("() =>")]),s._v(" {\n        err && $this.$Message({\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("message")]),s._v(": err,\n          "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("type")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'error'")]),s._v("\n        })\n      }, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("200")]),s._v(")\n    }\n  }\n})\n")])]),t("h3",[s._v("使用范例")]),t("p",[s._v("在根目录下的"),t("code",{pre:!0},[s._v("src")]),s._v("同级目录下创建"),t("code",{pre:!0},[s._v("api")]),s._v("文件夹，在"),t("code",{pre:!0},[s._v("api")]),s._v("文件夹里创建各个模块的"),t("code",{pre:!0},[s._v("api")]),s._v("文件，例如在"),t("code",{pre:!0},[s._v("api")]),s._v("文件里创建"),t("code",{pre:!0},[s._v("test")]),s._v("模块的"),t("code",{pre:!0},[s._v("test.js")]),s._v("文件，在文件中写入以下Api。")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'@/request/config'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//根据你创建的名字和放置的位置引入")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" test = {\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getTest")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("param")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("get")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/demo/getTest'")]),s._v(", param),\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("postParamTest")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("param")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("post")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/demo/postParamTest'")]),s._v(", param, { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("paramType")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'params'")]),s._v(" }),\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("postBodyTest")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("param")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("post")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/demo/postBodyTest'")]),s._v(", param),\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("putTest")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("param")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("put")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/demo/putTest'")]),s._v(", param, { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("paramType")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'params'")]),s._v(" }),\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("putBodyTest")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("param")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("put")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/demo/putBodyTest'")]),s._v(", param),\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("deleteTest")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("param")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("delete")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/demo/deleteTest'")]),s._v(", param),\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("deleteBodyTest")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("param")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("delete")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/demo/deleteBodyTest'")]),s._v(", param, { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("paramType")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'data'")]),s._v(" }),\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("getToken")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("param")]),s._v(" =>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title class_"}},[s._v("Request")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("requests")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'/user/login'")]),s._v(", param, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'delete'")]),s._v(", { "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("paramType")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'params'")]),s._v(" })\n}\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" test\n")])]),t("p",[s._v("在文件中引用")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("import")]),s._v(" test "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'@/api/test'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Test'")]),s._v(",\n  mounted () {\n    "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("this")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("getTest")]),s._v("()\n  },\n  "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n    getTest () {\n      test."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("getTest")]),s._v("({})\n        ."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("then")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n          "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(res, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求状态200,即接口请求成功时执行'")]),s._v(")\n        })."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("catch")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n          "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("(res, "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'请求状态非200,500,401等,即接口请求失败时执行'")]),s._v(")\n        })."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("finally")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("res")]),s._v(" =>")]),s._v(" {\n          "),t("span",{pre:!0,attrs:{class:"hljs-variable language_"}},[s._v("console")]),s._v("."),t("span",{pre:!0,attrs:{class:"hljs-title function_"}},[s._v("log")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'接口请求无论成功还是失败都会执行'")]),s._v(")\n        })\n    },\n  }\n}\n")])]),t("h3",[s._v("parameter")]),t("p",[s._v("参数顺序按以下排列")]),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),t("th",[s._v("说明")]),t("th",[s._v("类型")]),t("th",[s._v("必填")]),t("th",[s._v("可选值")]),t("th",[s._v("默认值")]),t("th",[s._v("方法差异说明")])])]),t("tbody",[t("tr",[t("td",[s._v("url")]),t("td",[s._v("url地址")]),t("td",[s._v("string")]),t("td",[s._v("是")]),t("td",[s._v("—")]),t("td",[s._v("—")]),t("td",[s._v("—")])]),t("tr",[t("td",[s._v("params")]),t("td",[s._v("传到后台的参数")]),t("td",[s._v("object")]),t("td",[s._v("否")]),t("td",[s._v("—")]),t("td",[s._v("{}")]),t("td",[s._v("—")])]),t("tr",[t("td",[s._v("type")]),t("td",[s._v("请求类型")]),t("td",[s._v("string")]),t("td",[s._v("是")]),t("td",[s._v("get、post、put、patch、delete")]),t("td",[s._v("get")]),t("td",[s._v("只在requests方法中使用，其他方法没有这个参数")])]),t("tr",[t("td",[s._v("config")]),t("td",[s._v("配置项，具体参数看下表")]),t("td",[s._v("object")]),t("td",[s._v("否")]),t("td",[s._v("—")]),t("td",[s._v("{}")]),t("td",[s._v("当前参数在requests方法中排列在第四位,在其他方法中排列在第三位")])])])]),t("h3",[s._v("config")]),t("p",[s._v("当前配置是个object，内置参数没有顺序。")]),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),t("th",[s._v("说明")]),t("th",[s._v("类型")]),t("th",[s._v("必填")]),t("th",[s._v("可选值")]),t("th",[s._v("默认值")]),t("th",[s._v("方法差异说明")])])]),t("tbody",[t("tr",[t("td",[s._v("loading")]),t("td",[s._v("是否开启loading,当全局loadding配置为true时才有效")]),t("td",[s._v("string")]),t("td",[s._v("否")]),t("td",[s._v("true")]),t("td",[s._v("—")]),t("td",[s._v("—")])]),t("tr",[t("td",[s._v("qs")]),t("td",[s._v("是否开启qs 转换")]),t("td",[s._v("boolean")]),t("td",[s._v("否")]),t("td",[s._v("—")]),t("td",[s._v("true")]),t("td",[s._v("—")])]),t("tr",[t("td",[s._v("headers")]),t("td",[s._v("设置请求头--可用来传递参数")]),t("td",[s._v("object")]),t("td",[s._v("否")]),t("td",[s._v("—")]),t("td",[s._v("{}")]),t("td",[s._v("只在requests方法中使用，其他方法没有这个参数")])]),t("tr",[t("td",[s._v("responseType")]),t("td",[s._v("响应类型")]),t("td",[s._v("string")]),t("td",[s._v("否")]),t("td",[s._v("—")]),t("td",[s._v("''")]),t("td",[s._v("—")])]),t("tr",[t("td",[s._v("paramType")]),t("td",[s._v("参数类型,详细说明见下表")]),t("td",[s._v("string")]),t("td",[s._v("否")]),t("td",[s._v("params：请求的参数跟在url后面; data：请求的参数在body里")]),t("td",[s._v("—")]),t("td",[s._v("—")])])])]),t("h3",[s._v("paramType")]),t("p",[s._v("当前参数在不同的请求方法中默认值是不同的")]),t("table",[t("thead",[t("tr",[t("th",[s._v("请求方法")]),t("th",[s._v("默认值")]),t("th",[s._v("说明")])])]),t("tbody",[t("tr",[t("td",[s._v("requests")]),t("td",[s._v("根据"),t("code",{pre:!0},[s._v("type")]),s._v("来决定,例如"),t("code",{pre:!0},[s._v("type")]),s._v("是"),t("code",{pre:!0},[s._v("get")]),s._v("那么当前请求方法的"),t("code",{pre:!0},[s._v("paramType")]),s._v("默认值就是"),t("code",{pre:!0},[s._v("params")]),s._v("，依次类推")]),t("td",[s._v("—")])]),t("tr",[t("td",[s._v("get")]),t("td",[s._v("params")]),t("td",[s._v("请求的参数跟在url后面")])]),t("tr",[t("td",[s._v("post")]),t("td",[s._v("data")]),t("td",[s._v("请求的参数在body里")])]),t("tr",[t("td",[s._v("put")]),t("td",[s._v("data")]),t("td",[s._v("请求的参数在body里")])]),t("tr",[t("td",[s._v("patch")]),t("td",[s._v("data")]),t("td",[s._v("请求的参数在body里")])]),t("tr",[t("td",[s._v("delete")]),t("td",[s._v("params")]),t("td",[s._v("请求的参数跟在url后面")])])])])])])])}],_=a("2877"),p={},v=Object(_["a"])(p,n,l,!1,null,null,null),c=v.exports,o={name:"Request",components:{Md:c}},h=o,i=Object(_["a"])(h,r,e,!1,null,null,null);t["default"]=i.exports}}]);